<div class="flex flex-col w-full">
  <div class="flex justify-between items-center">
    <div class="tabs tabs-box tabs-lg text-primary w-fit">
      @for (tab of tabs; track $index) {
      <button
        role="tab"
        class="tab"
        [class.tab-active]="container === tab.value"
        (click)="setContainer(tab.value)"
      >
        {{ tab.label }}
      </button>
      }
    </div>
    @if (paginatedMessages()?.metadata; as metadata)
        {
        <app-paginator [pageNumber]="metadata.currentPage" [totalCount]="metadata.totalCount"
            [pageSize]="metadata.pageSize" [totalPages]="metadata.totalPages" (pageChange)="onPageChange($event)" />
        }
  </div>
</div>

<div class="overflow-x-auto mt-5">
  <table class="table bg-base-200">
    <!-- head -->
    <thead>
      <tr>
        <th>Sender/Recipient</th>
        <th>Message</th>
        <th>Date</th>
        <th>Date Read</th>
      </tr>
    </thead>
    <tbody>
    @for (message of paginatedMessages()?.items; track message.id) {
      <tr 
      [class.font-bold]="isInbox && !message.dateRead"
      routerLink="/member/{{ isInbox? message.senderId: message.recipientId}}/messages"
      class="hover:bg-base-300 cursor-pointer"
      >
        <td>
            <div class="flex items-center gap-3">
                <div class="h-12 w-12 rounded">
                    <img class="rounded-full" src="{{isInbox ? message.senderImageUrl :message.recipientImageUrl}}" 
                    alt="image of member">
                </div>
                <div>
                    {{isInbox ? message.senderDisplayName : message.recipientDisplayName}}
                </div>
            </div>
        </td>
        <td>{{message.content}}</td>
        <td>{{message.messageSent}}</td>
        <td>{{message.dateRead}}</td>
      </tr>
    }
    </tbody>
  </table>
</div>
